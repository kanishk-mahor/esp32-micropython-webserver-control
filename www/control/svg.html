<html><head>
<title>octopusLAB-ESP32</title>
<meta charset="utf-8" />
<meta http-equiv="refresh" content="10" />
<script type="text/javascript" src="octopusengine-num.js"></script> 
<link href="control.css" rel="stylesheet" type="text/css" />
</head>
<script>
function loadInfo()
        {
            var button = document.getElementById("buttonInfo");
            
            var cnt = document.getElementById("cnt");
            var d10 = document.getElementById("d10");
            var d20 = document.getElementById("d20");
            var d30 = document.getElementById("d30");
            var pl1 = document.getElementById("pl1");

            button.value = "Refreshing...";
            button.disabled = true;
    
            var xhr = new XMLHttpRequest();
            xhr.timeout = 10000;
    
            xhr.onerror = function () {
                console.log("Error");
                button.value = "Refresh";
                button.disabled = false;
            }
    
            xhr.ontimeout = function () {
                console.log("Request timeout");
                button.value = "Refresh";
                button.disabled = false;
            }
    
            xhr.onload = function () {
                button.value = "Refresh";
                button.disabled = false;
    
                var json = JSON.parse(xhr.responseText);
                console.log(json);
                console.log(xhr.responseText);
                cnt.innerText = json['cnt'];
                d10.innerText = json['10'];
                d20.innerText = json['20'];  
                d30.innerText = json['30'];

                var points = [];
                var ITEMS_COUNT = 6;
                for (var i=1; i<=ITEMS_COUNT; i++){
                    ident = String.valueOf(i * 10);
                    points.push(ident + "," + json[ident]);
                }
                pl1.setAttribute('points', points.join(' '));
            }    
            xhr.open('GET', '/data.json');
            xhr.send();
        }
    
        
    </script>
    
    <body onload="loadInfo()">
    <h1><img src="octopus-72.png" ALIGN="BOTTOM"> octopusLAB - ESP32 control</h1>
    
    <br />
    <div class="radius">
    <h3>Esp32 data</h3>
    <b>counter: </b><span id="cnt">...</span><br />
    <hr />
    <b>10 </b><span id="d10">...</span><br />
    <b>20 </b><span id="d20">...</span><br />
    <b>30 </b><span id="d30">...</span><br />
    ... <span id="testInfo"></span><br />
    <br />
    <input class="button" type="button" onClick="loadInfo()" id="buttonInfo" value="Refresh" />

</div>
<br />

<div class="radius">
<br />
polyline<br /
>
<svg height="210" width="500">
<line x1="0" y1="1" x2="300" y2="1" style="stroke:rgb(255,0,0);stroke-width:1" />
<line x1="0" y1="100" x2="300" y2="100" style="stroke:rgb(255,0,0);stroke-width:1" />
<line x1="0" y1="200" x2="300" y2="200" style="stroke:rgb(255,0,0);stroke-width:1" />
<polyline id="pl1" points="20,20 40,25 60,40 80,120 120,140 200,180 220,20 240,30 260,15 280,100 300,80" style="fill:none;stroke:maroon;stroke-width:3" />
Sorry, your browser does not support inline SVG.
</svg>
</div>
        
<br />
<div class="radius">
<br />
◄ Back to main <a href="../index.html">MENU</a>
</div>

</body></html>
